{"ast":null,"code":"var _jsxFileName = \"/Users/sebastiangao/Desktop/laiofferProject/Around/Front_End/around-web/src/components/PhotoGallery.js\",\n    _s = $RefreshSig$();\n\nimport React, { Component, useState } from 'react';\nimport Gallery from 'react-grid-gallery';\nimport PropTypes from 'prop-types';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst captionStyle = {\n  backgroundColor: \"rgba(0, 0, 0, 0.6)\",\n  maxHeight: \"240px\",\n  overflow: \"hidden\",\n  position: \"absolute\",\n  bottom: \"0\",\n  width: \"100%\",\n  color: \"white\",\n  padding: \"2px\",\n  fontSize: \"90%\"\n};\nconst wrapperStyle = {\n  display: \"block\",\n  minHeight: \"1px\",\n  width: \"100%\",\n  border: \"1px solid #ddd\",\n  overflow: \"auto\"\n};\n\nfunction PhotoGallery(props) {\n  _s();\n\n  const [images, setImages] = useState(props.images);\n  const imageArr = images.map(image => {\n    return { ...image,\n      customOverlay: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: captionStyle,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"`$\", image.user, \": $\", image.caption, \"`\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 17\n      }, this)\n    };\n  });\n\n  const onCurrentImageChange = index => {\n    console.log('curIdx ', index);\n    setCurImgIdx(index);\n  };\n\n  useEffect(() => {\n    setImages(props.images);\n    setImages(props.images);\n  }, [props.images]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: wrapperStyle,\n    children: /*#__PURE__*/_jsxDEV(Gallery, {\n      images: imageArr,\n      enableImageSelection: false,\n      backdropClosesModal: true,\n      currentImageWillChange: onCurrentImageChange,\n      customControls: [/*#__PURE__*/_jsxDEV(Button, {\n        style: {\n          marginTop: \"10px\",\n          marginLeft: \"5px\"\n        },\n        type: \"primary\",\n        icon: /*#__PURE__*/_jsxDEV(DeleteOutlined, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 35\n        }, this),\n        size: \"small\",\n        onClick: onDeleteImage,\n        children: \"Delete Image\"\n      }, \"deleteImage\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 21\n      }, this)]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n\n  const onDeleteImage = () => {\n    if (window.confirm(`Are you sure you want to delete this image?`)) {\n      const curImg = images[curImgIdx];\n      const newImageArr = images.filter((img, index) => index !== curImgIdx);\n      console.log('delete image ', newImageArr);\n      const opt = {\n        method: 'DELETE',\n        url: `${BASE_URL}/post/${curImg.postId}`,\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem(TOKEN_KEY)}`\n        }\n      };\n      axios(opt).then(res => {\n        console.log('delete result -> ', res); // case1: success\n\n        if (res.status === 200) {\n          // step1: set state\n          setImages(newImageArr);\n        }\n      }).catch(err => {\n        // case2: fail\n        message.error('Fetch posts failed!');\n        console.log('fetch posts failed: ', err.message);\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Gallery, {\n    images: props.images\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 9\n  }, this);\n}\n\n_s(PhotoGallery, \"hVNKC6D3F7R5gtQXXtzihNyGgTA=\");\n\n_c = PhotoGallery;\nPhotoGallery.propTypes = {\n  images: PropTypes.arrayOf(PropTypes.shape({\n    user: PropTypes.string.isRequired,\n    caption: PropTypes.string.isRequired,\n    src: PropTypes.string.isRequired,\n    thumbnail: PropTypes.string.isRequired,\n    thumbnailWidth: PropTypes.number.isRequired,\n    thumbnailHeight: PropTypes.number.isRequired\n  })).isRequired\n};\nexport default PhotoGallery;\n\nvar _c;\n\n$RefreshReg$(_c, \"PhotoGallery\");","map":{"version":3,"sources":["/Users/sebastiangao/Desktop/laiofferProject/Around/Front_End/around-web/src/components/PhotoGallery.js"],"names":["React","Component","useState","Gallery","PropTypes","captionStyle","backgroundColor","maxHeight","overflow","position","bottom","width","color","padding","fontSize","wrapperStyle","display","minHeight","border","PhotoGallery","props","images","setImages","imageArr","map","image","customOverlay","user","caption","onCurrentImageChange","index","console","log","setCurImgIdx","useEffect","marginTop","marginLeft","onDeleteImage","window","confirm","curImg","curImgIdx","newImageArr","filter","img","opt","method","url","BASE_URL","postId","headers","localStorage","getItem","TOKEN_KEY","axios","then","res","status","catch","err","message","error","propTypes","arrayOf","shape","string","isRequired","src","thumbnail","thumbnailWidth","number","thumbnailHeight"],"mappings":"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","sourcesContent":["import React, {Component, useState} from 'react';\nimport Gallery from 'react-grid-gallery';\nimport PropTypes from 'prop-types';\n\nconst captionStyle = {\n    backgroundColor: \"rgba(0, 0, 0, 0.6)\",\n    maxHeight: \"240px\",\n    overflow: \"hidden\",\n    position: \"absolute\",\n    bottom: \"0\",\n    width: \"100%\",\n    color: \"white\",\n    padding: \"2px\",\n    fontSize: \"90%\"\n};\n\nconst wrapperStyle = {\n    display: \"block\",\n    minHeight: \"1px\",\n    width: \"100%\",\n    border: \"1px solid #ddd\",\n    overflow: \"auto\"\n};\n\nfunction PhotoGallery(props) {\n\n    const [images, setImages] = useState(props.images);\n    const imageArr = images.map(image => {\n        return {\n            ...image,\n            customOverlay: (\n                <div style={captionStyle}>\n                    <div>`${image.user}: ${image.caption}`</div>\n                </div>\n            )\n        }\n    })\n\n    const onCurrentImageChange = index => {\n        console.log('curIdx ', index);\n        setCurImgIdx(index)\n    }\n\n    useEffect(() => {\n        setImages(props.images)\n        setImages(props.images)\n    }, [props.images])\n\n    return (\n        <div style={wrapperStyle}>\n            <Gallery\n                images={imageArr}\n                enableImageSelection={false}\n                backdropClosesModal={true}\n                currentImageWillChange={onCurrentImageChange}\n                customControls={[\n                    <Button style={{marginTop: \"10px\", marginLeft: \"5px\"}}\n                            key=\"deleteImage\"\n                            type=\"primary\"\n                            icon={<DeleteOutlined/>}\n                            size=\"small\"\n                            onClick={onDeleteImage}\n                    >Delete Image</Button>\n                ]}\n            />\n        </div>\n    );\n\n    const onDeleteImage = () => {\n        if (window.confirm(`Are you sure you want to delete this image?`)) {\n            const curImg = images[curImgIdx];\n            const newImageArr = images.filter((img, index) => index !== curImgIdx);\n            console.log('delete image ', newImageArr);\n            const opt = {\n                method: 'DELETE',\n                url: `${BASE_URL}/post/${curImg.postId}`,\n                headers: {\n                    'Authorization': `Bearer ${localStorage.getItem(TOKEN_KEY)}`\n                }\n            };\n\n            axios(opt)\n                .then(res => {\n                    console.log('delete result -> ', res);\n                    // case1: success\n                    if (res.status === 200) {\n                        // step1: set state\n                        setImages(newImageArr);\n                    }\n                })\n                .catch(err => {\n                    // case2: fail\n                    message.error('Fetch posts failed!');\n                    console.log('fetch posts failed: ', err.message);\n                })\n        }\n    }\n\n\n\n\n    return (\n        <Gallery images={props.images}/>\n    );\n\n\n}\n\nPhotoGallery.propTypes = {\n    images: PropTypes.arrayOf(\n        PropTypes.shape({\n            user: PropTypes.string.isRequired,\n            caption: PropTypes.string.isRequired,\n            src: PropTypes.string.isRequired,\n            thumbnail: PropTypes.string.isRequired,\n            thumbnailWidth: PropTypes.number.isRequired,\n            thumbnailHeight: PropTypes.number.isRequired,\n        })\n    ).isRequired\n};\nexport default PhotoGallery;"]},"metadata":{},"sourceType":"module"}